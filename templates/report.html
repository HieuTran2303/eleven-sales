<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BÃ¡o cÃ¡o thÃ¡ng {{ month }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light py-5">

<div class="container">
  <div class="mb-4">
    <a href="/" class="btn btn-secondary">â¬… Quay láº¡i</a>
  </div>

  <div class="card shadow-sm rounded-4 p-4">
    <h2 class="text-primary fw-bold mb-3">ðŸ“Š BÃ¡o CÃ¡o BÃ¡n HÃ ng - {{ month }}</h2>

    {% if sales %}
      <table class="table table-bordered table-striped mt-3">
        <thead class="table-primary">
          <tr>
            <th>NgÃ y</th><th>Sáº£n pháº©m</th><th>Sá»‘ lÆ°á»£ng</th><th>GiÃ¡</th><th>Tá»•ng</th>
          </tr>
        </thead>
        <tbody>
          {% for s in sales %}
            <tr>
              <td>{{ s.date }}</td>
              <td>{{ s.item }}</td>
              <td>{{ s.quantity }}</td>
              <td>{{ s.price }}</td>
              <td>{{ s.total }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <h5 class="mt-4">ðŸ§¾ Tá»•ng doanh thu: <span class="fw-bold text-success">${{ total }}</span></h5>
      <a class="btn btn-outline-success mt-2" href="/export?month={{ month }}">ðŸ“¥ Táº£i bÃ¡o cÃ¡o Excel</a>

      <hr class="my-4">

      <h4 class="fw-semibold">ðŸ“ˆ Biá»ƒu Ä‘á»“ doanh thu tá»«ng ngÃ y</h4>
      <canvas id="salesChart" height="100"></canvas>

      <script>
        const ctx = document.getElementById('salesChart').getContext('2d');
        const salesChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: {{ chart_data.keys()|list }},
            datasets: [{
              label: 'Tá»•ng thu trong ngÃ y ($)',
              data: {{ chart_data.values()|list }},
              backgroundColor: 'rgba(54, 162, 235, 0.7)',
              borderRadius: 6
            }]
          },
          options: {
            responsive: true,
            plugins: {
              legend: { display: false }
            },
            scales: {
              y: { beginAtZero: true }
            }
          }
        });
      </script>

    {% else %}
      <p class="text-danger">ðŸš« KhÃ´ng cÃ³ dá»¯ liá»‡u nÃ o cho thÃ¡ng nÃ y.</p>
    {% endif %}
  </div>
</div>

</body>
</html>
